{% extends "dashboard/base.html" %}
{# Inherits the common dashboard layout (header, sidebar, content area) #}

{% load static %}
{# Loads static files such as CSS #}

{% block title %}Add Medication{% endblock %}
{# Sets the page title dynamically #}

{% block css %}
{# Links page-specific CSS for medication form styling #}
<link rel="stylesheet" href="{% static 'css/create_medication.css' %}">
{% endblock %}

{% block top_actions %}
{# Top-right action buttons in dashboard header #}

<a href="{% url 'dashboard:medications' %}" class="btn-outline">
    ‚Üê Back to Medications
</a>
{# Navigates back to medications list page #}

<a href="{% url 'login' %}" class="btn-outline">Logout</a>
{# Logs out the current user #}
{% endblock %}

{% block content %}
{# Main content section for this page #}

<h2 class="page-title">Add Medication</h2>
{# Page heading #}

<div class="form-card">
    {# Card container for medication form #}

    <h3>Medication Details</h3>
    {# Section heading inside the form card #}

    <form method="POST">
        {# Form uses POST method to submit medication data securely #}

        {% csrf_token %}
        {# CSRF token for protection against cross-site request forgery #}

        <!-- Pet -->
        <div class="form-group">
            <label>Pet</label>
            {# Dropdown to select pet for which medication is prescribed #}
            <select name="pet" required>
                <option value="">Select Pet</option>
                {% for pet in pets %}
                    {# Loops through pets passed from the view #}
                    <option value="{{ pet.id }}">{{ pet.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Medication Name -->
        <div class="form-group">
            <label>Medication Name</label>
            {# Input field for medication name #}
            <input type="text" name="medication_name"
                   placeholder="Enter medication name" required>
        </div>

        <!-- Dosage & Frequency -->
        <div class="form-row">
            {# Row layout for dosage and frequency fields #}

            <div class="form-group">
                <label>Dosage</label>
                {# Dosage amount (e.g. 5ml, 1 tablet) #}
                <input type="text" name="dosage"
                       placeholder="e.g. 5ml / 1 tablet" required>
            </div>

            <div class="form-group">
                <label>Frequency</label>
                {# Frequency of medication intake #}
                <input type="text" name="frequency"
                       placeholder="e.g. Twice a day" required>
            </div>
        </div>

        <!-- Dates -->
        <div class="form-row">
            {# Row layout for start and end date fields #}

            <div class="form-group">
                <label>Start Date</label>
                {# Date when medication starts #}
                <input type="date" name="start_date" required>
            </div>

            <div class="form-group">
                <label>End Date</label>
                {# Optional end date for medication #}
                <input type="date" name="end_date">
            </div>
        </div>

        <!-- Notes -->
        <div class="form-group">
            <label>Notes</label>
            {# Optional notes related to medication #}
            <textarea name="notes" rows="3"
                      placeholder="Additional notes"></textarea>
        </div>

        {# Submit button to save medication details #}
        <button type="submit" class="save-btn">
            Save Medication
        </button>
    </form>
</div>

{% endblock %}
